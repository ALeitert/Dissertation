% -------------------------------------------
%  Header file.
%
%  Contains the design definitions.
% -------------------------------------------

\usepackage[doublespacing]{setspace}

\makeatletter

% Set colours for certain use.
\colorlet{clPart}{black}
\colorlet{clChapter}{black}
\colorlet{clSection}{black}
\colorlet{clTocPart}{black}
\colorlet{clTocChapter}{black}
\colorlet{clHeadFoot}{black}

%---------------------------
% - - - Chapter design - - -

% Adds name of cahpter to heading.
\renewcommand{\@schapter}[1]
{
    \@mkboth{#1}{#1}
    \phantomsection
    \addcontentsline{toc}{chapter}{#1}
    \if@twocolumn
        \@topnewpage[\@makeschapterhead{#1}]%
    \else
        \@makeschapterhead{#1}%
        \@afterheading
    \fi
}

% Command which contains the design for chapter headlines.
% Allows to change the design at a central place.
\newcommand{\setChapterStyle}
{
    \parindent \z@
    \setlength{\parskip}{1em}
    \interlinepenalty\@M

    \centering
    \rmfamily
    \bfseries\boldmath

    \Large
    \color{clChapter}

    \newcommand{\chapterNote}[1]
    {%
        \renewcommand{\thefootnote}{\raisebox{0.3ex}{\footnotesize$\star$}}%
        \footnotemark%
        \renewcommand{\thefootnote}{$\star$}%
        \footnotetext{##1}%
        \setcounter{footnote}{0}%
    }
}

% Chapter headlines with nuber.
\def\@makechapterhead#1%
{{%
    \setChapterStyle
    \parbox[t][1in][b]{\linewidth}%
    {
        \ifnum \c@secnumdepth >\m@ne \vspace{\fill}
            \centering
            \normalsize \normalfont \@chapapp\space \thechapter
        \fi
    }
    \par\nobreak  \vskip 5\p@
    #1 \par\nobreak
    \vskip 40\p@
}}

% Chapter headlines without number.
\def\@makeschapterhead#1%
{{%
    \setChapterStyle
    \parbox[t][1in][b]{\linewidth}{\centering#1}
    \par\nobreak
    \vskip 40\p@
}}

% Change special chapter definitions to fix bug and text of headings
\renewcommand{\tableofcontents}
{%
    \if@twocolumn
        \@restonecoltrue\onecolumn
    \else
        \@restonecolfalse
    \fi
    \chapter*{\contentsname}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi
}
\renewcommand{\listoffigures}
{%
    \if@twocolumn
        \@restonecoltrue\onecolumn
    \else
        \@restonecolfalse
    \fi
    \chapter*{\listfigurename}%
    \@starttoc{lof}%
    \if@restonecol\twocolumn\fi
}
\renewcommand{\listoftables}
{%
    \if@twocolumn
        \@restonecoltrue\onecolumn
    \else
        \@restonecolfalse
    \fi
    \chapter*{\listtablename}%
    \@starttoc{lot}%
    \if@restonecol\twocolumn\fi
}


%---------------------------
% - - - Section design - - -

% Based on LNCS format.

\renewcommand{\section}
{%
    \@startsection{section}{1}{\z@}%
        {%
            -19.8\p@ \@plus -4.4\p@ \@minus -4.4\p@%
        }%
        {%
            13.2\p@ \@plus 4.4\p@ \@minus 4.4\p@%
        }%
        {%
            \normalfont%
            \large%
            \bfseries%
            \boldmath%
            \color{clSection}%
            \rightskip=\z@ \@plus 8em%
            \pretolerance=10000%
        }%
}

\renewcommand{\subsection}
{%
    \@startsection{subsection}{2}{\z@}%
        {%
            -19.8\p@ \@plus -4.4\p@ \@minus -4.4\p@%
        }%
        {%
            8.8\p@ \@plus 4.4\p@ \@minus 4.4\p@%
        }%
        {%
            \normalfont%
            \normalsize%
            \bfseries%
            \boldmath%
            \color{clSection}%
            \rightskip=\z@ \@plus 8em%
            \pretolerance=10000%
        }%
}

\renewcommand{\subsubsection}
{%
    \@startsection{subsubsection}{3}{\z@}%
        {%
            -19.8\p@ \@plus -4.4\p@ \@minus -4.4\p@%
        }%
        {%
            -0.55em \@plus -0.232em \@minus -0.11em%
        }%
        {%
            \normalfont%
            \normalsize%
            \bfseries%
            \boldmath%
        }%
}

\renewcommand{\paragraph}
{%
    \@startsection{paragraph}{4}{\z@}%
        {%
            -13.2\p@ \@plus -4.4\p@ \@minus -4.4\p@%
        }%
        {%
            -0.55em \@plus -0.232em \@minus -0.11em%
        }%
        {%
            \normalfont%
            \normalsize%
            \itshape%
        }%
}

% No sub-paragraph posible.
\let\subparagraph\undefined


% --------------------------
% - - - Caption design - - -
%

\usepackage{chngcntr}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}

\usepackage[font={small,sf}]{caption}
\DeclareCaptionFormat{plain}{\doublespacing\textsb{#1}#2#3}
\DeclareCaptionLabelSeparator{dot}{. }
\captionsetup{labelsep=dot}

% Subfigures
\usepackage{subcaption}
\captionsetup{subrefformat=parens}

% No indent for entryies in List of Tables/Figures.
\renewcommand*\l@figure{\@dottedtocline{1}{0em}{2.3em}}
\renewcommand*\l@table{\@dottedtocline{1}{0em}{2.3em}}


%-------------------------------
% - - - Algorithm keywords - - -

% General design.
\SetKwSty{keyword}

% Spelling of keywords.
%Do keyword is removed and keywords start with a capital letter.
\SetKw{KwTo}{To}
\SetKw{KwDownTo}{DownTo}

\SetKw{KwRet}{Return}

\SetKw{Return}{Return}

\SetKwBlock{Begin}
           {Begin}{End}

\SetKwIF{If}{ElseIf}{Else}
        {If}{Then}{Else If}{Else}{End If}

\SetKwSwitch{Switch}{Case}{Other}
            {Switch}{}{Case}{Otherwise}{End Case}{End Switch}

\SetKwFor{For}
         {For}{}{End For}

\SetKwFor{While}
         {While}{}{End While}

\SetKwFor{ForEach}
         {For Each}{}{End For}

\SetKwFor{ForAll}
         {For All}{}{End For}

\SetKwRepeat{Repeat}
            {Repeat}{Until}


%------------------------------
% - - - Table of Contents - - -
% Changed in such a way that it shows bold math and writes part headlines larger and draws a line infront of them.


\newlength{\tocPartLength}
\newlength{\tocPartLineLength}

\renewcommand*\l@part[2]{%
  \ifnum \c@tocdepth >-2\relax
    \addpenalty{-\@highpenalty}%
    \addvspace{2.25em \@plus\p@}%
    \setlength\@tempdima{3em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      {\leavevmode
       \LARGE\bfseries\boldmath\color{clTocPart}%
       \settowidth{\tocPartLength}{#1}%
       \addtolength{\tocPartLength}{.5em}%
       \setlength{\tocPartLineLength}{\linewidth}%
       \addtolength{\tocPartLineLength}{-\tocPartLength}%
       #1\hspace*{\fill}\rule[.5ex]{\tocPartLineLength}{2pt}%
       }\par
       \nobreak
         \global\@nobreaktrue
         \everypar{\global\@nobreakfalse\everypar{}}%
    \endgroup
  \fi}
\renewcommand*\l@chapter[2]{%
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \vskip 1.0em \@plus\p@
    \setlength\@tempdima{1.5em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \bfseries\boldmath\color{clTocChapter}
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak\hfil \nobreak\hb@xt@\@pnumwidth{\hss #2}\par
      \penalty\@highpenalty
    \endgroup
  \fi}
%---------------------------------------------

\makeatother
